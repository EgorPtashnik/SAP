<core:FragmentDefinition
    xmlns:core="sap.ui.core"
    xmlns="sap.m">
    <Table items="{/lists}"
           noDataText="No Todo Lists"
           mode="{=${/editMode} ? 'Delete' : 'SingleSelectMaster'}"
           delete="onOpenDeleteConfirmationDialog"
           busy="{config>/busy}"
           busyIndicatorDelay="1">
        <columns>
            <Column>
                <Text text="Name"/>
            </Column>
            <Column>
                <Text text="Category"/>
            </Column>
            <Column>
                <Text text="Status"/>
            </Column>
        </columns>
        <items>
            <ColumnListItem>
                <cells>
                    <VBox>
                        <ObjectIdentifier title="{name}" text="Items: {ItemsCount}" visible="{=!${/editMode}}"/>
                        <Input value="{name}" visible="{/editMode}"/>
                    </VBox>
                    <VBox>
                        <Text text="{path: 'category_id', formatter: '.Formatter.getCategoryText'}" visible="{=!${/editMode}}"/>
                        <Select items="{path: 'config>/TodoListCategories', templateShareable: true}" selectedKey="{category_id}" visible="{/editMode}">
                            <core:Item key="{config>id}" text="{config>category}"/>
                        </Select>
                    </VBox>
                    <ObjectStatus inverted="true"
                                  text="{path: 'status', formatter: '.Formatter.getListStatusText'}"
                                  state="{path: 'status', formatter: '.Formatter.getListStatusType'}"
                                  icon="{path: 'status', formatter: '.Formatter.getListStatusIcon'}"/>
                </cells>
            </ColumnListItem>
        </items>
    </Table>
</core:FragmentDefinition>